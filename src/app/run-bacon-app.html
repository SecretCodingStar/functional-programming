<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Functional JavaScript Programming | Luis Atencio</title>

    <script src="../lib/bacon.min.js"></script>
    <script src="../lib/jquery.js"></script>
    <script src="../lib/bacon.jquery.min.js"></script>
    <script src="../lib/ramda.js"></script>
</head>
<body>
    <div>
        <h1><span id="banner">[name]</span></h1>
        <table id="student-form">
            <form>
                <tr>
                    <td>
                        <label>Enter name:</label>
                    </td>
                    <td>
                        <input id="student-name" type="text">
                    </td>
                </tr>
                <!--<tr>-->
                    <!--<td>-->
                        <!--<label>Student First Name:</label>-->
                    <!--</td>-->
                    <!--<td>-->
                        <!--<input type="text">-->
                    <!--</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td>-->
                        <!--<label>Student Last Name:</label>-->
                    <!--</td>-->
                    <!--<td>-->
                        <!--<input type="text">-->
                    <!--</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="submit"></td>-->
                <!--</tr>-->
            </form>
        </table>
    </div>
<script>

    var getValue = function(event) {
        return $(event.target).val();
    };

    var cleanValue = function(val) {
        return R.isNil(val) ? 'Anonymous' : val;
    };

    var processTargetObject = R.compose(cleanValue, getValue);

    var idField = $('#student-name').asEventStream('keyup')
            .map(processTargetObject)
            .toProperty();

    idField.onValue(function(val) {
        $('#banner').text(val);
    });

//    The JQuery version
//    $('#student-name').keyup(function(event) {
//        var val = $(this).val();
//        if(val == null || val == undefined || val.length == 0) {
//            val = 'Anonymous';
//        }
//        $('#banner').text('Welcome: ' + val);
//    })

</script>
</body>
</html>