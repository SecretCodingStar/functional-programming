{"version":3,"sources":["stream-min.js"],"names":[],"mappings":"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","file":"stream-min-compiled.js","sourcesContent":["function Stream(head, tailPromise) {\n    if (typeof head != 'undefined') {\n        this.headValue = head;\n    }\n    if (typeof tailPromise == 'undefined') {\n        tailPromise = function () {\n            return new Stream();\n        };\n    }\n    this.tailPromise = tailPromise;\n}\nStream.prototype = {\n    empty: function () {\n        return typeof this.headValue == 'undefined';\n    }, head: function () {\n        if (this.empty()) {\n            throw'Cannot get the head of the empty stream.';\n        }\n        return this.headValue;\n    }, tail: function () {\n        if (this.empty()) {\n            throw'Cannot get the tail of the empty stream.';\n        }\n        return this.tailPromise();\n    }, item: function (n) {\n        if (this.empty()) {\n            throw'Cannot use item() on an empty stream.';\n        }\n        var s = this;\n        while (n != 0) {\n            --n;\n            try {\n                s = s.tail();\n            }\n            catch (e) {\n                throw'Item index does not exist in stream.';\n            }\n        }\n        try {\n            return s.head();\n        }\n        catch (e) {\n            throw'Item index does not exist in stream.';\n        }\n    }, length: function () {\n        var s = this;\n        var len = 0;\n        while (!s.empty()) {\n            ++len;\n            s = s.tail();\n        }\n        return len;\n    }, add: function (s) {\n        return this.zip(function (x, y) {\n            return x + y;\n        }, s);\n    }, zip: function (f, s) {\n        if (this.empty()) {\n            return s;\n        }\n        if (s.empty()) {\n            return this;\n        }\n        var self = this;\n        return new Stream(f(s.head(), this.head()), function () {\n            return self.tail().zip(f, s.tail());\n        });\n    }, map: function (f) {\n        if (this.empty()) {\n            return this;\n        }\n        var self = this;\n        return new Stream(f(this.head()), function () {\n            return self.tail().map(f);\n        });\n    }, reduce: function (aggregator, initial) {\n        if (this.empty()) {\n            return initial;\n        }\n        return this.tail().reduce(aggregator, aggregator(initial, this.head()));\n    }, sum: function () {\n        return this.reduce(function (a, b) {\n            return a + b;\n        }, 0);\n    }, walk: function (f) {\n        this.map(function (x) {\n            f(x);\n            return x;\n        }).force();\n    }, force: function () {\n        var stream = this;\n        while (!stream.empty()) {\n            stream = stream.tail();\n        }\n    }, scale: function (factor) {\n        return this.map(function (x) {\n            return factor * x;\n        });\n    }, filter: function (f) {\n        if (this.empty()) {\n            return this;\n        }\n        var h = this.head();\n        var t = this.tail();\n        if (f(h)) {\n            return new Stream(h, function () {\n                return t.filter(f);\n            });\n        }\n        return t.filter(f);\n    }, take: function (howmany) {\n        if (this.empty()) {\n            return this;\n        }\n        if (howmany == 0) {\n            return new Stream();\n        }\n        var self = this;\n        return new Stream(this.head(), function () {\n            return self.tail().take(howmany - 1);\n        });\n    }, drop: function (n) {\n        var self = this;\n        while (n-- > 0) {\n            if (self.empty()) {\n                return new Stream();\n            }\n            self = self.tail();\n        }\n        return new Stream(self.headValue, self.tailPromise);\n    }, member: function (x) {\n        var self = this;\n        while (!self.empty()) {\n            if (self.head() == x) {\n                return true;\n            }\n            self = self.tail();\n        }\n        return false;\n    }, print: function (n) {\n        var target;\n        if (typeof n != 'undefined') {\n            target = this.take(n);\n        }\n        else {\n            target = this;\n        }\n        target.walk(function (x) {\n            console.log(x);\n        });\n    }, toString: function () {\n        return '[stream head: ' + this.head() + '; tail: ' + this.tail() + ']';\n    }\n};\nStream.makeOnes = function () {\n    return new Stream(1, Stream.makeOnes);\n};\nStream.makeNaturalNumbers = function () {\n    return new Stream(1, function () {\n        return Stream.makeNaturalNumbers().add(Stream.makeOnes());\n    });\n};\nStream.make = function () {\n    if (arguments.length == 0) {\n        return new Stream();\n    }\n    var restArguments = Array.prototype.slice.call(arguments, 1);\n    return new Stream(arguments[0], function () {\n        return Stream.make.apply(null, restArguments);\n    });\n};\nStream.range = function (low, high) {\n    if (typeof low == 'undefined') {\n        low = 1;\n    }\n    if (low == high) {\n        return Stream.make(low);\n    }\n    return new Stream(low, function () {\n        return Stream.range(low + 1, high);\n    });\n};"]}