{"version":3,"sources":["app4-functional-compiled.js"],"names":[],"mappings":"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","file":"app4-functional-compiled-compiled.js","sourcesContent":["'use strict';\n\nvar HOST = 'http://localhost:8000';\n\nvar getJSON = function getJSON(url) {\n    return new Promise(function (resolve, reject) {\n        var req = new XMLHttpRequest();\n        req.responseType = 'json';\n        req.open('GET', url);\n        req.onload = function () {\n            if (req.status == 200) {\n                console.log(req.response);\n                resolve(req.response);\n            } else {\n                reject(Error(req.statusText));\n            }\n        };\n        req.onerror = function () {\n            reject(Error('IO Error'));\n        };\n        req.send();\n    });\n};\n\nvar forkJoin = function forkJoin(join, func1, func2) {\n    return function (val) {\n        return join(func1(val), func2(val));\n    };\n};\nvar hide = function hide(id) {\n    return $('#' + id).hide();\n};\n\nvar populateRow = function populateRow(columns) {\n    var cell_t = _.template('<td><%= a %></td>');\n    var row_t = _.template('<tr><%= a %></tr>');\n    var obj = function obj(a) {\n        return { 'a': a };\n    };\n    var row = R.compose(row_t, obj, R.join(''), R.map(cell_t), R.map(obj));\n    return row(columns);\n};\n\nvar appendToTable = function appendToTable(elementId) {\n    return function (row) {\n        $('#' + elementId + ' tr:last').after(row);\n        return $('#' + elementId + ' tr').length - 1; // exclude header\n    };\n};\n\n// 1\ngetJSON(HOST + '/students').then(hide('spinner')).then(R.sortBy(R.prop('ssn'))).then(R.filter(function (s) {\n    return s.address.country == 'US';\n})).then(R.map(function (student) {\n    return getJSON(HOST + '/grades?ssn=' + student.ssn).then(R.compose(Math.ceil, forkJoin(R.divide, R.sum, R.length))).then(function (grade) {\n        var data = R.merge(student, { 'grade': grade });\n        var unsafeIO = IO.of(data).map(R.props(['ssn', 'firstname', 'lastname', 'grade'])).map(populateRow).map(appendToTable('studentRoster'));\n        unsafeIO.run();\n    });\n}))['catch'](function (error) {\n    alert('Erro occurred: ' + error.message);\n});\n\nvar write = function write(id) {\n    return function (value) {\n        $('#' + id).text(value);\n    };\n};\n\nvar average = R.compose(Math.ceil, forkJoin(R.divide, R.sum, R.length));\n\n//// 2\n//getJSON(HOST + '/students')\n//    .then(hide('spinner'))\n//    .then(R.map((student) => HOST + '/grades?ssn=' + student.ssn))\n//    .then(function (gradeUrls) {\n//        return Promise.all(R.map(getJSON, gradeUrls))\n//    })\n//    .then(R.map(average))\n//    .then(average)\n//    .then(function (grade) {\n//        IO.of(grade).map(write('total')).run();\n//    })\n//    .catch(function(error) {\n//        alert('Error occurred: ' + error.message);\n//    });\n\n//# sourceMappingURL=app4-functional-compiled.js.map"]}